{
  "meta": {
    "schemaVersion": 1,
    "solver": "network-solver"
  },
  "sites": {
    "esp0xdeadbeef": {
      "site-a": {
        "_routingMaps": {
          "assumptions": {
            "core": "s-router-core",
            "policy": "s-router-policy",
            "singleAccess": "s-router-access",
            "upstreamSelector": null
          },
          "defaults": {
            "default4": "0.0.0.0/0",
            "default6": "::/0"
          },
          "mode": "static",
          "tenants": {
            "ipv4": [
              "10.20.10.0/24"
            ],
            "ipv6": [
              "fd42:dead:beef:10::/64"
            ]
          }
        },
        "compilerIR": {
          "addressPools": {
            "local": {
              "ipv4": "10.19.0.0/24",
              "ipv6": "fd42:dead:beef:1900::/118"
            },
            "p2p": {
              "ipv4": "10.10.0.0/24",
              "ipv6": "fd42:dead:beef:1000::/118"
            }
          },
          "attachment": [
            {
              "segment": "tenants:mgmt",
              "unit": "s-router-access"
            }
          ],
          "communicationContract": {
            "allowedRelations": [],
            "nat": {
              "ingress": []
            }
          },
          "domains": {
            "tenants": [
              {
                "ipv4": "10.20.10.0/24",
                "ipv6": "fd42:dead:beef:10::/64",
                "name": "mgmt"
              }
            ]
          },
          "routerLoopbacks": {
            "s-router-access": {
              "ipv4": "10.19.0.1",
              "ipv6": "fd42:dead:beef:1900:0:0:0:1"
            },
            "s-router-core": {
              "ipv4": "10.19.0.2",
              "ipv6": "fd42:dead:beef:1900:0:0:0:2"
            },
            "s-router-policy": {
              "ipv4": "10.19.0.3",
              "ipv6": "fd42:dead:beef:1900:0:0:0:3"
            }
          },
          "transit": {
            "adjacencies": [
              {
                "endpoints": [
                  {
                    "local": {
                      "ipv4": "10.10.0.1",
                      "ipv6": "fd42:dead:beef:1000:0:0:0:1"
                    },
                    "unit": "s-router-core"
                  },
                  {
                    "local": {
                      "ipv4": "10.10.0.2",
                      "ipv6": "fd42:dead:beef:1000:0:0:0:2"
                    },
                    "unit": "s-router-policy"
                  }
                ]
              },
              {
                "endpoints": [
                  {
                    "local": {
                      "ipv4": "10.10.0.3",
                      "ipv6": "fd42:dead:beef:1000:0:0:0:3"
                    },
                    "unit": "s-router-policy"
                  },
                  {
                    "local": {
                      "ipv4": "10.10.0.4",
                      "ipv6": "fd42:dead:beef:1000:0:0:0:4"
                    },
                    "unit": "s-router-access"
                  }
                ]
              }
            ],
            "ordering": [
              [
                "s-router-core",
                "s-router-policy"
              ],
              [
                "s-router-policy",
                "s-router-access"
              ]
            ]
          },
          "units": {
            "s-router-access": {
              "containers": [
                "isolated-0"
              ],
              "isolated": true
            },
            "s-router-core": {
              "containers": [
                "isolated-0"
              ],
              "isolated": true
            },
            "s-router-policy": {
              "containers": [
                "default"
              ],
              "isolated": false
            }
          }
        },
        "links": {
          "p2p-s-router-access-s-router-policy": {
            "endpoints": {
              "s-router-access": {
                "addr4": "10.10.0.0/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:0/127"
              },
              "s-router-policy": {
                "addr4": "10.10.0.1/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:1/127"
              }
            },
            "kind": "p2p"
          },
          "p2p-s-router-core-s-router-policy": {
            "endpoints": {
              "s-router-core": {
                "addr4": "10.10.0.2/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:2/127"
              },
              "s-router-policy": {
                "addr4": "10.10.0.3/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:3/127"
              }
            },
            "kind": "p2p"
          }
        },
        "nodes": {
          "s-router-access": {
            "interfaces": {
              "p2p-s-router-access-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.10.0.0/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:0/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [
                  {
                    "dst": "0.0.0.0/0",
                    "via4": "10.10.0.1"
                  }
                ],
                "routes6": [
                  {
                    "dst": "::/0",
                    "via6": "fd42:dead:beef:1000:0:0:0:1"
                  }
                ],
                "tenant": null
              }
            },
            "role": "access"
          },
          "s-router-core": {
            "interfaces": {
              "p2p-s-router-core-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.10.0.2/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:2/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [],
                "routes6": [],
                "tenant": null
              }
            },
            "role": "core"
          },
          "s-router-policy": {
            "interfaces": {
              "p2p-s-router-access-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.10.0.1/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:1/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [
                  {
                    "dst": "10.20.10.0/24",
                    "via4": "10.10.0.0"
                  }
                ],
                "routes6": [
                  {
                    "dst": "fd42:dead:beef:10::/64",
                    "via6": "fd42:dead:beef:1000:0:0:0:0"
                  }
                ],
                "tenant": null
              },
              "p2p-s-router-core-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.10.0.3/31",
                "addr6": "fd42:dead:beef:1000:0:0:0:3/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [],
                "routes6": [],
                "tenant": null
              }
            },
            "role": "policy"
          }
        }
      },
      "site-b": {
        "_routingMaps": {
          "assumptions": {
            "core": "s-router-core",
            "policy": "s-router-policy",
            "singleAccess": "s-router-access",
            "upstreamSelector": null
          },
          "defaults": {
            "default4": "0.0.0.0/0",
            "default6": "::/0"
          },
          "mode": "static",
          "tenants": {
            "ipv4": [
              "10.30.10.0/24"
            ],
            "ipv6": [
              "fd42:dead:beef:11::/64"
            ]
          }
        },
        "compilerIR": {
          "addressPools": {
            "local": {
              "ipv4": "10.29.0.0/24",
              "ipv6": "fd42:dead:beef:2900::/118"
            },
            "p2p": {
              "ipv4": "10.11.0.0/24",
              "ipv6": "fd42:dead:beef:1100::/118"
            }
          },
          "attachment": [
            {
              "segment": "tenants:mgmt",
              "unit": "s-router-access"
            }
          ],
          "communicationContract": {
            "allowedRelations": [],
            "nat": {
              "ingress": []
            }
          },
          "domains": {
            "tenants": [
              {
                "ipv4": "10.30.10.0/24",
                "ipv6": "fd42:dead:beef:11::/64",
                "name": "mgmt"
              }
            ]
          },
          "routerLoopbacks": {
            "s-router-access": {
              "ipv4": "10.29.0.1",
              "ipv6": "fd42:dead:beef:2900:0:0:0:1"
            },
            "s-router-core": {
              "ipv4": "10.29.0.2",
              "ipv6": "fd42:dead:beef:2900:0:0:0:2"
            },
            "s-router-policy": {
              "ipv4": "10.29.0.3",
              "ipv6": "fd42:dead:beef:2900:0:0:0:3"
            }
          },
          "transit": {
            "adjacencies": [
              {
                "endpoints": [
                  {
                    "local": {
                      "ipv4": "10.11.0.1",
                      "ipv6": "fd42:dead:beef:1100:0:0:0:1"
                    },
                    "unit": "s-router-core"
                  },
                  {
                    "local": {
                      "ipv4": "10.11.0.2",
                      "ipv6": "fd42:dead:beef:1100:0:0:0:2"
                    },
                    "unit": "s-router-policy"
                  }
                ]
              },
              {
                "endpoints": [
                  {
                    "local": {
                      "ipv4": "10.11.0.3",
                      "ipv6": "fd42:dead:beef:1100:0:0:0:3"
                    },
                    "unit": "s-router-policy"
                  },
                  {
                    "local": {
                      "ipv4": "10.11.0.4",
                      "ipv6": "fd42:dead:beef:1100:0:0:0:4"
                    },
                    "unit": "s-router-access"
                  }
                ]
              }
            ],
            "ordering": [
              [
                "s-router-core",
                "s-router-policy"
              ],
              [
                "s-router-policy",
                "s-router-access"
              ]
            ]
          },
          "units": {
            "s-router-access": {
              "containers": [
                "isolated-0"
              ],
              "isolated": true
            },
            "s-router-core": {
              "containers": [
                "isolated-0"
              ],
              "isolated": true
            },
            "s-router-policy": {
              "containers": [
                "default"
              ],
              "isolated": false
            }
          }
        },
        "links": {
          "p2p-s-router-access-s-router-policy": {
            "endpoints": {
              "s-router-access": {
                "addr4": "10.11.0.0/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:0/127"
              },
              "s-router-policy": {
                "addr4": "10.11.0.1/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:1/127"
              }
            },
            "kind": "p2p"
          },
          "p2p-s-router-core-s-router-policy": {
            "endpoints": {
              "s-router-core": {
                "addr4": "10.11.0.2/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:2/127"
              },
              "s-router-policy": {
                "addr4": "10.11.0.3/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:3/127"
              }
            },
            "kind": "p2p"
          }
        },
        "nodes": {
          "s-router-access": {
            "interfaces": {
              "p2p-s-router-access-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.11.0.0/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:0/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [
                  {
                    "dst": "0.0.0.0/0",
                    "via4": "10.11.0.1"
                  }
                ],
                "routes6": [
                  {
                    "dst": "::/0",
                    "via6": "fd42:dead:beef:1100:0:0:0:1"
                  }
                ],
                "tenant": null
              }
            },
            "role": "access"
          },
          "s-router-core": {
            "interfaces": {
              "p2p-s-router-core-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.11.0.2/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:2/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [],
                "routes6": [],
                "tenant": null
              }
            },
            "role": "core"
          },
          "s-router-policy": {
            "interfaces": {
              "p2p-s-router-access-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.11.0.1/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:1/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [
                  {
                    "dst": "10.30.10.0/24",
                    "via4": "10.11.0.0"
                  }
                ],
                "routes6": [
                  {
                    "dst": "fd42:dead:beef:11::/64",
                    "via6": "fd42:dead:beef:1100:0:0:0:0"
                  }
                ],
                "tenant": null
              },
              "p2p-s-router-core-s-router-policy": {
                "acceptRA": false,
                "addr4": "10.11.0.3/31",
                "addr6": "fd42:dead:beef:1100:0:0:0:3/127",
                "addr6Public": null,
                "carrier": "lan",
                "dhcp": false,
                "export": false,
                "gateway": false,
                "kind": "p2p",
                "ra6Prefixes": [],
                "routes4": [],
                "routes6": [],
                "tenant": null
              }
            },
            "role": "policy"
          }
        }
      }
    }
  }
}
